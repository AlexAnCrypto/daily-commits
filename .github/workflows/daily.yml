name: Daily Commit (Random Time + Quotes)

on:
  schedule:
    - cron: "0 0 * * *"
  workflow_dispatch:

jobs:
  build:
    runs-on: ubuntu-latest

    steps:
      - name: Random delay
        run: |
          DELAY=$(( RANDOM % 43200 ))
          echo "Sleeping for $DELAY seconds (≈ $((DELAY/3600)) hours)"
          sleep $DELAY

      - name: Checkout repository
        uses: actions/checkout@v3

      - name: Generate random quote
        run: |
          QUOTES=(
            "The best way to predict the future is to create it."
            "Success is not final, failure is not fatal: it is the courage to continue that counts."
            "Dream big. Start small. Act now."
            "Do something today that your future self will thank you for."
            "It always seems impossible until it's done."
            "Every day is a new chance to change your life."
            "What we think, we become."
            "Start where you are. Use what you have. Do what you can."
            "The secret of getting ahead is getting started."
            "Believe you can and you're halfway there."
          )

          # выбираем случайную цитату
          RANDOM_INDEX=$(( RANDOM % ${#QUOTES[@]} ))
          RANDOM_QUOTE="${QUOTES[$RANDOM_INDEX]}"

          echo "$RANDOM_QUOTE" > daily.txt
          echo "Selected quote: $RANDOM_QUOTE"

      - name: Commit and push changes
        run: |
          git config --global user.name "GitHub Action"
          git config --global user.email "action@github.com"
          git add .
          git commit -m "Daily quote update" || echo "Nothing to commit"
          git push
